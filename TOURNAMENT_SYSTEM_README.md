# Há»‡ Thá»‘ng Giáº£i Äáº¥u SABO POOL ARENA

## Tá»•ng Quan

Há»‡ thá»‘ng giáº£i Ä‘áº¥u SABO POOL ARENA Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ quáº£n lÃ½ cÃ¡c giáº£i Ä‘áº¥u billiards liÃªn tá»¥c vá»›i cáº¥u trÃºc mÃ¹a giáº£i vÃ  há»‡ thá»‘ng tÃ­nh Ä‘iá»ƒm ELO. Má»—i CLB cÃ³ thá»ƒ tá»• chá»©c giáº£i Ä‘áº¥u riÃªng, vÃ  ngÆ°á»i chÆ¡i sáº½ nháº­n Ä‘Æ°á»£c Ä‘iá»ƒm ELO dá»±a trÃªn thÃ nh tÃ­ch cá»§a há».

## Cáº¥u TrÃºc Há»‡ Thá»‘ng

### 1. MÃ¹a Giáº£i (Seasons)
- Má»—i mÃ¹a giáº£i kÃ©o dÃ i nhiá»u thÃ¡ng
- MÃ¹a 2 hiá»‡n táº¡i kÃ©o dÃ i Ä‘áº¿n háº¿t 30/9/2025
- Top BXH cá»§a mÃ¹a sáº½ nháº­n Ä‘Æ°á»£c pháº§n thÆ°á»Ÿng cá»§a há»‡ thá»‘ng SABO POOL ARENA

### 2. Háº¡ng Giáº£i Äáº¥u (Tournament Tiers)
Há»‡ thá»‘ng cÃ³ 4 háº¡ng giáº£i Ä‘áº¥u vá»›i Ä‘iá»ƒm ELO khÃ¡c nhau:

#### Giáº£i Háº¡ng G (Cao cáº¥p nháº¥t)
- ğŸ¥‡ Top 1: +1200 Ä‘iá»ƒm ELO
- ğŸ¥ˆ Top 2: +900 Ä‘iá»ƒm ELO  
- ğŸ¥‰ Top 3: +700 Ä‘iá»ƒm ELO
- 4th: +500 Ä‘iá»ƒm ELO
- Top 8: +250 Ä‘iá»ƒm ELO
- Tham gia: +100 Ä‘iá»ƒm ELO
- PhÃ­ Ä‘Äƒng kÃ½: 500,000 - 2,000,000 VNÄ

#### Giáº£i Háº¡ng H (Trung cáº¥p)
- ğŸ¥‡ Top 1: +1100 Ä‘iá»ƒm ELO
- ğŸ¥ˆ Top 2: +850 Ä‘iá»ƒm ELO
- ğŸ¥‰ Top 3: +650 Ä‘iá»ƒm ELO
- 4th: +450 Ä‘iá»ƒm ELO
- Top 8: +200 Ä‘iá»ƒm ELO
- Tham gia: +100 Ä‘iá»ƒm ELO
- PhÃ­ Ä‘Äƒng kÃ½: 200,000 - 800,000 VNÄ

#### Giáº£i Háº¡ng I (CÆ¡ báº£n)
- ğŸ¥‡ Top 1: +1000 Ä‘iá»ƒm ELO
- ğŸ¥ˆ Top 2: +800 Ä‘iá»ƒm ELO
- ğŸ¥‰ Top 3: +600 Ä‘iá»ƒm ELO
- 4th: +400 Ä‘iá»ƒm ELO
- Top 8: +150 Ä‘iá»ƒm ELO
- Tham gia: +100 Ä‘iá»ƒm ELO
- PhÃ­ Ä‘Äƒng kÃ½: 100,000 - 500,000 VNÄ

#### Giáº£i Háº¡ng K (Cho ngÆ°á»i má»›i)
- ğŸ¥‡ Top 1: +1000 Ä‘iá»ƒm ELO
- ğŸ¥ˆ Top 2: +800 Ä‘iá»ƒm ELO
- ğŸ¥‰ Top 3: +600 Ä‘iá»ƒm ELO
- 4th: +400 Ä‘iá»ƒm ELO
- Top 8: +150 Ä‘iá»ƒm ELO
- Tham gia: +100 Ä‘iá»ƒm ELO
- PhÃ­ Ä‘Äƒng kÃ½: 50,000 - 200,000 VNÄ

## Cáº¥u TrÃºc Database

### Báº£ng ChÃ­nh

#### 1. `tournament_tiers`
LÆ°u trá»¯ thÃ´ng tin cÃ¡c háº¡ng giáº£i Ä‘áº¥u vÃ  Ä‘iá»ƒm ELO tÆ°Æ¡ng á»©ng.

#### 2. `seasons`
Quáº£n lÃ½ cÃ¡c mÃ¹a giáº£i vá»›i thá»i gian báº¯t Ä‘áº§u/káº¿t thÃºc.

#### 3. `tournaments`
ThÃ´ng tin chi tiáº¿t vá» cÃ¡c giáº£i Ä‘áº¥u:
- ThÃ´ng tin cÆ¡ báº£n (tÃªn, mÃ´ táº£, Ä‘á»‹a Ä‘iá»ƒm)
- Loáº¡i giáº£i Ä‘áº¥u (single_elimination, double_elimination, round_robin, swiss)
- Format game (8_ball, 9_ball, 10_ball, straight_pool)
- Háº¡ng giáº£i Ä‘áº¥u (tier_code)
- Giáº£i thÆ°á»Ÿng vÃ  phÃ­ Ä‘Äƒng kÃ½
- Tráº¡ng thÃ¡i giáº£i Ä‘áº¥u

#### 4. `tournament_registrations`
Quáº£n lÃ½ Ä‘Äƒng kÃ½ tham gia giáº£i Ä‘áº¥u.

#### 5. `tournament_matches`
Quáº£n lÃ½ cÃ¡c tráº­n Ä‘áº¥u trong giáº£i.

#### 6. `tournament_results`
Káº¿t quáº£ cuá»‘i cÃ¹ng cá»§a ngÆ°á»i chÆ¡i trong giáº£i Ä‘áº¥u.

#### 7. `season_standings`
Báº£ng xáº¿p háº¡ng tá»•ng thá»ƒ cá»§a mÃ¹a giáº£i.

#### 8. `club_standings`
Báº£ng xáº¿p háº¡ng riÃªng cá»§a tá»«ng CLB.

## TÃ­nh NÄƒng ChÃ­nh

### 1. Quáº£n LÃ½ Giáº£i Äáº¥u
- Táº¡o giáº£i Ä‘áº¥u vá»›i háº¡ng vÃ  Ä‘iá»ƒm ELO tÆ°Æ¡ng á»©ng
- Quáº£n lÃ½ Ä‘Äƒng kÃ½ tham gia
- Theo dÃµi tráº­n Ä‘áº¥u vÃ  káº¿t quáº£
- Tá»± Ä‘á»™ng tÃ­nh Ä‘iá»ƒm ELO khi káº¿t thÃºc giáº£i

### 2. Báº£ng Xáº¿p Háº¡ng
- **Báº£ng xáº¿p háº¡ng mÃ¹a giáº£i**: Tá»•ng há»£p Ä‘iá»ƒm ELO tá»« táº¥t cáº£ giáº£i Ä‘áº¥u trong mÃ¹a
- **Báº£ng xáº¿p háº¡ng CLB**: Chá»‰ tÃ­nh ngÆ°á»i chÆ¡i Ä‘Ã£ xÃ¡c nháº­n háº¡ng táº¡i CLB Ä‘Ã³
- Hiá»ƒn thá»‹ thay Ä‘á»•i thá»© háº¡ng (tÄƒng/giáº£m)

### 3. Há»‡ Thá»‘ng ELO
- TÃ­nh Ä‘iá»ƒm ELO tá»± Ä‘á»™ng dá»±a trÃªn háº¡ng giáº£i Ä‘áº¥u vÃ  vá»‹ trÃ­
- Cá»™ng dá»“n Ä‘iá»ƒm qua cÃ¡c giáº£i Ä‘áº¥u
- Cáº­p nháº­t thá»© háº¡ng real-time

### 4. Quáº£n LÃ½ CLB
- Má»—i CLB cÃ³ báº£ng xáº¿p háº¡ng riÃªng
- XÃ¡c nháº­n ngÆ°á»i chÆ¡i táº¡i CLB
- Thá»‘ng kÃª thÃ nh tÃ­ch CLB

## API Endpoints

### Tournaments
- `GET /tournaments` - Láº¥y danh sÃ¡ch giáº£i Ä‘áº¥u
- `POST /tournaments` - Táº¡o giáº£i Ä‘áº¥u má»›i
- `PUT /tournaments/:id` - Cáº­p nháº­t giáº£i Ä‘áº¥u
- `DELETE /tournaments/:id` - XÃ³a giáº£i Ä‘áº¥u
- `POST /tournaments/:id/register` - ÄÄƒng kÃ½ tham gia
- `POST /tournaments/:id/finalize` - Káº¿t thÃºc giáº£i Ä‘áº¥u

### Seasons
- `GET /seasons` - Láº¥y danh sÃ¡ch mÃ¹a giáº£i
- `GET /seasons/:id/standings` - Báº£ng xáº¿p háº¡ng mÃ¹a
- `GET /seasons/:id/statistics` - Thá»‘ng kÃª mÃ¹a giáº£i

### Club Standings
- `GET /clubs/:id/standings` - Báº£ng xáº¿p háº¡ng CLB
- `POST /clubs/:id/verify-player` - XÃ¡c nháº­n ngÆ°á»i chÆ¡i táº¡i CLB
- `DELETE /clubs/:id/players/:userId` - XÃ³a ngÆ°á»i chÆ¡i khá»i CLB

## Components React

### 1. TournamentCard
Hiá»ƒn thá»‹ thÃ´ng tin giáº£i Ä‘áº¥u vá»›i:
- Háº¡ng giáº£i Ä‘áº¥u vÃ  Ä‘iá»ƒm ELO
- Giáº£i thÆ°á»Ÿng vÃ  phÃ­ Ä‘Äƒng kÃ½
- Tráº¡ng thÃ¡i vÃ  thÃ´ng tin tham gia

### 2. SeasonLeaderboard
Báº£ng xáº¿p háº¡ng mÃ¹a giáº£i vá»›i:
- Thá»© háº¡ng vÃ  Ä‘iá»ƒm ELO
- Thay Ä‘á»•i thá»© háº¡ng
- ThÃ nh tÃ­ch vÃ  giáº£i thÆ°á»Ÿng

### 3. ClubLeaderboard
Báº£ng xáº¿p háº¡ng CLB vá»›i:
- Thá»© háº¡ng trong CLB
- Tráº¡ng thÃ¡i xÃ¡c nháº­n
- ThÃ nh tÃ­ch táº¡i CLB

### 4. TournamentTierSelector
Chá»n háº¡ng giáº£i Ä‘áº¥u vá»›i:
- Hiá»ƒn thá»‹ Ä‘iá»ƒm ELO cá»§a tá»«ng háº¡ng
- PhÃ­ Ä‘Äƒng kÃ½ vÃ  yÃªu cáº§u
- So sÃ¡nh cÃ¡c háº¡ng

## Hooks React

### 1. useTournaments
Quáº£n lÃ½ giáº£i Ä‘áº¥u:
- CRUD giáº£i Ä‘áº¥u
- ÄÄƒng kÃ½/há»§y Ä‘Äƒng kÃ½
- Quáº£n lÃ½ tráº­n Ä‘áº¥u vÃ  káº¿t quáº£
- TÃ­nh Ä‘iá»ƒm ELO

### 2. useSeasons
Quáº£n lÃ½ mÃ¹a giáº£i:
- Láº¥y thÃ´ng tin mÃ¹a giáº£i
- Báº£ng xáº¿p háº¡ng mÃ¹a
- Thá»‘ng kÃª vÃ  tiáº¿n Ä‘á»™

### 3. useClubStandings
Quáº£n lÃ½ báº£ng xáº¿p háº¡ng CLB:
- XÃ¡c nháº­n ngÆ°á»i chÆ¡i
- Báº£ng xáº¿p háº¡ng CLB
- So sÃ¡nh CLB

## Quy TrÃ¬nh Hoáº¡t Äá»™ng

### 1. Táº¡o Giáº£i Äáº¥u
1. CLB chá»n háº¡ng giáº£i Ä‘áº¥u (G/H/I/K)
2. Nháº­p thÃ´ng tin giáº£i Ä‘áº¥u
3. Há»‡ thá»‘ng tá»± Ä‘á»™ng Ã¡p dá»¥ng Ä‘iá»ƒm ELO theo háº¡ng

### 2. ÄÄƒng KÃ½ Tham Gia
1. NgÆ°á»i chÆ¡i xem thÃ´ng tin giáº£i Ä‘áº¥u
2. ÄÄƒng kÃ½ tham gia (náº¿u cÃ²n chá»—)
3. Thanh toÃ¡n phÃ­ Ä‘Äƒng kÃ½

### 3. Diá»…n Ra Giáº£i Äáº¥u
1. Quáº£n lÃ½ tráº­n Ä‘áº¥u
2. Cáº­p nháº­t káº¿t quáº£
3. Theo dÃµi tiáº¿n Ä‘á»™

### 4. Káº¿t ThÃºc Giáº£i Äáº¥u
1. Nháº­p káº¿t quáº£ cuá»‘i cÃ¹ng
2. Há»‡ thá»‘ng tá»± Ä‘á»™ng tÃ­nh Ä‘iá»ƒm ELO
3. Cáº­p nháº­t báº£ng xáº¿p háº¡ng mÃ¹a vÃ  CLB

### 5. Káº¿t ThÃºc MÃ¹a Giáº£i
1. Tá»•ng káº¿t Ä‘iá»ƒm ELO cá»§a mÃ¹a
2. Trao giáº£i thÆ°á»Ÿng cho top BXH
3. Báº¯t Ä‘áº§u mÃ¹a giáº£i má»›i

## Báº£o Máº­t vÃ  Quyá»n Truy Cáº­p

### RLS Policies
- Chá»‰ CLB owner má»›i cÃ³ thá»ƒ táº¡o/sá»­a giáº£i Ä‘áº¥u
- NgÆ°á»i chÆ¡i chá»‰ cÃ³ thá»ƒ Ä‘Äƒng kÃ½ giáº£i Ä‘áº¥u
- Tournament organizer cÃ³ thá»ƒ quáº£n lÃ½ tráº­n Ä‘áº¥u vÃ  káº¿t quáº£
- Táº¥t cáº£ ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ xem báº£ng xáº¿p háº¡ng

### Validation
- Kiá»ƒm tra háº¡n cháº¿ háº¡ng cho giáº£i Ä‘áº¥u
- Validate phÃ­ Ä‘Äƒng kÃ½ theo háº¡ng
- Kiá»ƒm tra sá»‘ lÆ°á»£ng ngÆ°á»i tham gia
- Validate thá»i gian Ä‘Äƒng kÃ½ vÃ  diá»…n ra

## Monitoring vÃ  Analytics

### Thá»‘ng KÃª
- Sá»‘ lÆ°á»£ng giáº£i Ä‘áº¥u theo háº¡ng
- Tá»•ng Ä‘iá»ƒm ELO phÃ¢n phá»‘i
- ThÃ nh tÃ­ch CLB
- Tiáº¿n Ä‘á»™ mÃ¹a giáº£i

### BÃ¡o CÃ¡o
- BÃ¡o cÃ¡o giáº£i Ä‘áº¥u theo thá»i gian
- Thá»‘ng kÃª ngÆ°á»i chÆ¡i tham gia
- PhÃ¢n tÃ­ch xu hÆ°á»›ng Ä‘iá»ƒm ELO
- So sÃ¡nh hiá»‡u suáº¥t CLB

## Deployment

### Migration
```sql
-- Cháº¡y migration Ä‘á»ƒ táº¡o há»‡ thá»‘ng giáº£i Ä‘áº¥u
supabase db push
```

### Functions
```sql
-- Táº¡o cÃ¡c function cáº§n thiáº¿t
CREATE OR REPLACE FUNCTION calculate_tournament_elo_points(...)
CREATE OR REPLACE FUNCTION recalculate_rankings(...)
```

### Triggers
```sql
-- Táº¡o triggers tá»± Ä‘á»™ng cáº­p nháº­t
CREATE TRIGGER trigger_update_season_standings(...)
CREATE TRIGGER trigger_update_club_standings(...)
```

## TÆ°Æ¡ng Lai

### TÃ­nh NÄƒng Dá»± Kiáº¿n
- Live streaming giáº£i Ä‘áº¥u
- Há»‡ thá»‘ng Ä‘áº·t cÆ°á»£c
- Tournament brackets tá»± Ä‘á»™ng
- Mobile app cho tournament management
- AI prediction káº¿t quáº£ giáº£i Ä‘áº¥u

### Má»Ÿ Rá»™ng
- LiÃªn káº¿t vá»›i cÃ¡c CLB khÃ¡c
- Giáº£i Ä‘áº¥u quá»‘c táº¿
- Há»‡ thá»‘ng ranking toÃ n cáº§u
- E-sports integration 